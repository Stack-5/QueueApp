(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{3495:(e,t,a)=>{Promise.resolve().then(a.bind(a,2859))},2859:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var r=a(5155),s=a(4459),l=a(6046),o=a(2115),n=a(2317),i=a(1027),d=a(3463),c=a(9795);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,d.$)(t))}let m=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=o.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:o=!1,...i}=e,d=o?n.DX:"button";return(0,r.jsx)(d,{className:u(m({variant:s,size:l,className:a})),ref:t,...i})});f.displayName="Button";let p=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",a),...s})});p.displayName="Card";let x=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...s})});x.displayName="CardHeader";let h=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("font-semibold leading-none tracking-tight",a),...s})});h.displayName="CardTitle";let y=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",a),...s})});y.displayName="CardDescription";let g=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("p-6 pt-0",a),...s})});g.displayName="CardContent";let b=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...s})});b.displayName="CardFooter";let N=o.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});N.displayName="Input";var w=a(6195);let j=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(w.b,{ref:t,className:u(j(),a),...s})});v.displayName=w.b.displayName;var S=a(4850),R=a(2645),k=a(2488),C=a(7193);let F=S.bL,q=S.YJ,E=S.WT,P=o.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(S.l9,{ref:t,className:u("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(S.In,{asChild:!0,children:(0,r.jsx)(R.A,{className:"h-4 w-4 opacity-50"})})]})});P.displayName=S.l9.displayName;let A=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(S.PP,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(k.A,{className:"h-4 w-4"})})});A.displayName=S.PP.displayName;let U=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(S.wn,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(R.A,{className:"h-4 w-4"})})});U.displayName=S.wn.displayName;let z=o.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...o}=e;return(0,r.jsx)(S.ZL,{children:(0,r.jsxs)(S.UC,{ref:t,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...o,children:[(0,r.jsx)(A,{}),(0,r.jsx)(S.LM,{className:u("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(U,{})]})})});z.displayName=S.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(S.JU,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",a),...s})}).displayName=S.JU.displayName;let I=o.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(S.q7,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(S.VF,{children:(0,r.jsx)(C.A,{className:"h-4 w-4"})})}),(0,r.jsx)(S.p4,{children:s})]})});I.displayName=S.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(S.wv,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=S.wv.displayName;var D=a(2651);let T="https://neu-43k5gfcwva-uc.a.run.app",B=async(e,t,a,r)=>{if(null==e)throw Error("Queue ID is missing.");if(!t)throw Error("Please select a purpose.");if(!a||a.length<10)throw Error("Invalid phone number.");if(!r)throw Error("Missing authentication token.");let s={queueID:e,purpose:t,cellphoneNumber:a,customerStatus:"pending",createdAt:new Date().toISOString(),timestamp:Date.now()};console.log("Using environment URL:",T),console.log("Submitting with token:",r),console.log("Final request payload:",s),console.log("Final request URL:","".concat(T,"/queue/add"));try{return(await D.A.post("".concat(T,"/queue/add"),s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.trim())}})).data}catch(e){throw console.error("Axios request failed:",e),e}};var Q=a(5724);let _=Q.bL;Q.l9;let L=Q.ZL,M=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.hJ,{className:u("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});M.displayName=Q.hJ.displayName;let Y=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(M,{}),(0,r.jsx)(Q.UC,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});Y.displayName=Q.UC.displayName;let J=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",t),...a})};J.displayName="AlertDialogHeader";let O=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};O.displayName="AlertDialogFooter";let V=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.hE,{ref:t,className:u("text-lg font-semibold",a),...s})});V.displayName=Q.hE.displayName;let Z=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.VY,{ref:t,className:u("text-sm text-muted-foreground",a),...s})});Z.displayName=Q.VY.displayName;let H=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.rc,{ref:t,className:u(m(),a),...s})});H.displayName=Q.rc.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q.ZD,{ref:t,className:u(m({variant:"outline"}),"mt-2 sm:mt-0",a),...s})}).displayName=Q.ZD.displayName;let K=async e=>{try{let t=await D.A.post("".concat("https://neu-43k5gfcwva-uc.a.run.app","/queue/notify"),{timestamp:Date.now()},{headers:{Authorization:"Bearer ".concat(e)}});return console.log(t.data),t.data}catch(e){throw console.error("[notifyQueue] Error notifying queue:",e),e}},W=()=>{let[e,t]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),{queueNumber:d,token:c}=(0,s.e)(),[u,m]=(0,o.useState)(!1),[w,j]=(0,o.useState)(""),[S,R]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{if(!c){console.warn("[HomeComponent] Token not available yet.");return}try{await K(c)}catch(e){console.error("Failed to notify queue:",e)}})()},[c]),(0,o.useEffect)(()=>{let e=setTimeout(()=>m(!0),100);return()=>clearTimeout(e)},[]);let k=async()=>{if(!e||!a||!d){j("Please fill out all fields."),R(!0);return}i(!0);try{await B(d,e,a,c),j("Form submitted successfully!")}catch(e){j("Failed to submit form. Please try again.")}finally{R(!0),i(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 p-6 transition-all duration-700 ".concat(u?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:[(0,r.jsxs)("h1",{className:"text-5xl font-bold",style:{color:"#0077B6"},children:["NEU",(0,r.jsx)("span",{style:{color:"#FFBF00"},children:"QUEUE"})]}),(0,r.jsx)("p",{className:"text-gray-650 mt-2 text-center font-bold",children:"Thank you for scanning!"}),(0,r.jsxs)("p",{className:"text-center text-gray-600 max-w-lg mt-2 font-bold",children:["This system helps manage queues efficiently, allowing you to join a virtual line without waiting physically. You’ll receive an SMS notification when it’s your turn. You only have to wait"," ",(0,r.jsx)("span",{className:"text-red-500 font-bold",children:"a couple of minutes"})," at most for you to be served at the cashier.⏳"]}),(0,r.jsxs)("h2",{className:"text-2xl font-semibold mt-4",style:{color:"#0077B6"},children:["Your queue number is\xa0",(0,r.jsx)("span",{className:"font-bold",children:d?"#".concat(((e,t)=>{if(!t)return e.toString();let a=t.substring(0,1).toUpperCase();return"".concat(a).concat(e.toString().padStart(3,"0"))})(d,e)):"..."}),"."]}),(0,r.jsx)("p",{className:"text-gray-600 mt-2 text-center",children:"Please wait for an SMS notification, which will be sent to you shortly."}),(0,r.jsxs)(p,{className:"w-[350px] mt-6",children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(h,{children:"Required section"}),(0,r.jsx)(y,{children:"To proceed, please enter your SMS details."})]}),(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(v,{htmlFor:"purpose",children:"Purpose"}),(0,r.jsxs)(F,{onValueChange:t,children:[(0,r.jsx)(P,{id:"purpose",className:"border-[#FFBF00]",children:(0,r.jsx)(E,{placeholder:"Select a purpose"})}),(0,r.jsx)(z,{children:(0,r.jsxs)(q,{children:[(0,r.jsx)(I,{value:"inquiry",children:"Inquiry"}),(0,r.jsx)(I,{value:"payment",children:"Payment"})]})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(v,{htmlFor:"phone",children:"Cellphone Number (required)"}),(0,r.jsx)(N,{id:"phone",placeholder:"Enter your cellphone number",className:"border-[#FFBF00]",value:a,onChange:e=>l(e.target.value)})]})]})}),(0,r.jsx)(b,{className:"flex justify-center",children:(0,r.jsx)(f,{className:"w-40",style:{backgroundColor:"#0077B6",color:"#FFBF00"},onClick:k,disabled:n,children:n?"Submitting...":(0,r.jsx)("span",{className:"font-bold",children:"Submit"})})})]}),(0,r.jsx)("p",{className:"text-gray-600 font-extrabold mt-4 text-sm text-center",children:"Remember to always check your notifications. Thank you!"}),(0,r.jsx)(_,{open:S,onOpenChange:R,children:(0,r.jsxs)(Y,{children:[(0,r.jsxs)(J,{children:[(0,r.jsx)(V,{children:"Notification"}),(0,r.jsx)(Z,{children:w})]}),(0,r.jsx)(O,{children:(0,r.jsx)(H,{onClick:()=>R(!1),children:"OK"})})]})})]})},X=()=>{let{token:e}=(0,s.e)(),t=(0,l.useRouter)();return(0,o.useEffect)(()=>{e&&0===e.length&&console.log(e)},[e,t]),(0,r.jsx)(W,{})}},4459:(e,t,a)=>{"use strict";a.d(t,{QueueProvider:()=>n,e:()=>i});var r=a(5155),s=a(2115),l=a(7684);let o=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,s.useState)(0),[i,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("queueNumber");if(e)try{let t=(0,l.s)(e).exp;t&&t<Math.floor(Date.now()/1e3)?(console.warn("[QueueProvider] Token expired. Removing from local storage."),localStorage.removeItem("token"),localStorage.removeItem("queueNumber"),d(null),n(0)):d(e)}catch(e){console.error("[QueueProvider] Failed to decode token:",e),localStorage.removeItem("token"),localStorage.removeItem("queueNumber"),d(null),n(0)}t&&n(Number(t))},[]),(0,r.jsx)(o.Provider,{value:{queueNumber:a,setQueueNumber:n,token:i,setToken:d},children:t})},i=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useQueueContext must be used within a QueueProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[225,441,517,358],()=>t(3495)),_N_E=e.O()}]);