(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2721:(e,r,t)=>{Promise.resolve().then(t.bind(t,4236))},4236:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var o=t(5155),n=t(6046),s=t(2115),a=t(7684),u=t(2651),i=t(3205);let c=()=>{let e=(0,n.useSearchParams)(),r=(0,n.useRouter)(),[t,c]=(0,s.useState)(!1),l=async()=>{let t=e.get("token")||localStorage.getItem("token");if(!t){console.warn("[processInitialQueueInformation] No token found. Redirecting to 401."),r.replace("/error/unauthorized");return}try{await u.A.get("".concat("https://neu-43k5gfcwva-uc.a.run.app","/queue/verify-on-mount"),{headers:{Authorization:"Bearer ".concat(t)}});let e=(0,a.s)(t);localStorage.setItem("token",t),console.log("[processQueueInformation] Valid token found:",e),c(!0),"id"in e?(console.log("[processQueueInformation] Redirecting to /form."),r.replace("/form")):"queueID"in e&&"stationID"in e?(console.log("[processQueueInformation] Redirecting to /queue-status."),r.replace("/queue-status")):(console.warn("[processQueueInformation] Unexpected token structure."),r.replace("/error/unauthorized"))}catch(e){if((0,i.F0)(e)){var o,n;console.error("[processQueueInformation] Axios error:",null===(o=e.response)||void 0===o?void 0:o.data.message),(null===(n=e.response)||void 0===n?void 0:n.status)===401?(localStorage.removeItem("token"),r.replace("/error/unauthorized")):r.replace("/error/internal-server-error")}}};return(0,s.useEffect)(()=>{l()},[]),(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen text-center px-6 transition-opacity duration-500 ".concat(t?"opacity-0":"opacity-100"),children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-[#FFBF00] rounded-full animate-spin mb-6"}),(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Fetching your queue..."}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we get your spot in line."})]})};function l(){return(0,o.jsx)(s.Suspense,{children:(0,o.jsx)(c,{})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[451,441,517,358],()=>r(2721)),_N_E=e.O()}]);