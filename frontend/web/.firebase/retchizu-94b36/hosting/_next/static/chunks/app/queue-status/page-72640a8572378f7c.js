(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{5839:(e,t,r)=>{Promise.resolve().then(r.bind(r,7464))},7464:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),n=r(2115),s=r(4085),o=r(8569),c=r(6046),i=r(2651);let l=e=>{if(e%100>=11&&e%100<=13)return"".concat(e,"th");switch(e%10){case 1:return"".concat(e,"st");case 2:return"".concat(e,"nd");case 3:return"".concat(e,"rd");default:return"".concat(e,"th")}};var u=r(4448);let d=()=>{let[e,t]=(0,n.useState)(!1),r=(0,c.useRouter)(),[d,m]=(0,n.useState)(null),[h,f]=(0,n.useState)(null),[x,g]=(0,n.useState)([]),{token:p,decodedToken:b}=(0,o.W)(r);console.log("token in queue",p);let[v,y]=(0,n.useState)();return(0,n.useEffect)(()=>{b&&y(b.queueID)},[p]),(0,n.useEffect)(()=>{let e=setTimeout(()=>t(!0),100);return()=>clearTimeout(e)},[]),(0,n.useEffect)(()=>{p&&(async()=>{try{let e="https://neu-43k5gfcwva-uc.a.run.app",t=await i.A.get("".concat(e,"/queue/queue-position"),{headers:{Authorization:"Bearer ".concat(p)}});m(t.data.position);let r=await i.A.get("".concat(e,"/queue/station-info"),{headers:{Authorization:"Bearer ".concat(p)}});f(r.data.stationInfo);let a=await i.A.get("".concat(e,"/queue/get-latest"),{headers:{Authorization:"Bearer ".concat(p)}});g(a.data.queueIDs)}catch(e){console.error(e)}})()},[p]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#f2f2f2] p-6 pb-16 transition-all duration-700 ".concat(e?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:[(0,a.jsxs)("h1",{className:"text-5xl font-bold text-[#0077B6] text-center mb-8",children:["NEU",(0,a.jsx)("span",{className:"text-[#FFBF00]",children:"QUEUE"})]}),null!==d&&h&&v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-center mb-2",children:"Selected station:"}),(0,a.jsx)("p",{className:"text-xl font-bold text-center mb-1",children:h.name}),(0,a.jsx)("p",{className:"text-sm text-center mb-8 text-gray-600",children:h.description}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-[#0077B6] text-center mb-4",children:["You are ",(0,a.jsx)("span",{className:"text-[#FFBF00]",children:l(d)})," in line"]}),(0,a.jsxs)("p",{className:"text-lg text-center mb-4",children:["Estimated Wait Time: ",(0,u.A)((0,u.g)(d-1))]}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-center mb-10",children:["QUEUE ID: ",v]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-10 w-full max-w-md",children:x.map(e=>(0,a.jsx)("p",{className:"px-4 py-3 rounded-lg shadow-md text-lg font-semibold text-center ".concat(e===v?"bg-[#0077B6] text-white":"bg-white text-gray-800"),children:e},e))}),(0,a.jsx)(s.$,{className:"bg-[#e53935] hover:bg-[#d32f2f] transition-shadow duration-300 shadow-md text-white font-semibold rounded-lg py-3 px-6",children:"Leave Queue"}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("p",{className:"text-base font-medium text-gray-700 text-center mb-2",children:"Thank you for your patience."}),(0,a.jsx)("p",{className:"text-base font-medium text-gray-700 text-center",children:"Have a wonderful day!"})]})]}):(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-[#FFBF00] rounded-full animate-spin mb-6"})]})}},4085:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>i});var a=r(5155),n=r(2115),s=r(2317),o=r(1027),c=r(9602);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:l=!1,...u}=e,d=l?s.DX:"button";return(0,a.jsx)(d,{className:(0,c.cn)(i({variant:n,size:o,className:r})),ref:t,...u})});l.displayName="Button"},8569:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});var a=r(2651),n=r(3205),s=r(7684),o=r(6046),c=r(2115);let i=e=>{let t=(0,o.usePathname)(),[r,i]=(0,c.useState)(null),[l,u]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let r=localStorage.getItem("token");if(console.log("in local storage",r),!r){e.replace("error/unauthorized");return}(async()=>{try{await a.A.get("".concat("https://neu-43k5gfcwva-uc.a.run.app","/queue/verify-on-mount"),{headers:{Authorization:"Bearer ".concat(r)}});let n=(0,s.s)(r);u(n),"id"in n&&"/form"!==t?(console.log("[useVerifyValidToken] Detected newToken, redirecting to form."),e.replace("/form")):"queueID"in n&&"stationID"in n&&"/queue-status"!==t?(console.log("[useVerifyValidToken] Detected pendingToken, redirecting to queue-status."),e.replace("/queue-status")):"id"in n||"queueID"in n||(console.warn("[useVerifyValidToken] Unexpected token structure."),e.replace("/error/unauthorized")),i(r)}catch(t){if((0,n.F0)(t)){var o,c;console.log(null===(o=t.response)||void 0===o?void 0:o.data.message),(null===(c=t.response)||void 0===c?void 0:c.status)===401?(e.replace("/error/unauthorized"),localStorage.removeItem("token")):e.replace("/error/internal-server-error")}}})()},[]),{token:r,decodedToken:l}}},9602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(3463),n=r(9795);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},4448:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,g:()=>a});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e*t},n=e=>{let t=Math.floor(e/60),r=e%60;return t>0?"".concat(t,"h ").concat(r,"m"):"".concat(r,"m")}}},e=>{var t=t=>e(e.s=t);e.O(0,[451,365,441,517,358],()=>t(5839)),_N_E=e.O()}]);